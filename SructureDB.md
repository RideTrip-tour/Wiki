
# СТруктура БД

### Таблицы

1. **`activities_locations_table`** (Таблица для связи "многие ко многим"):
   - Используется для реализации отношения "многие ко многим" между таблицами `activities` и `locations`.
   - Поля:
     - `activity_id`: внешний ключ на `activities.id`.
     - `location_id`: внешний ключ на `locations.id`.

2. **`trips_segments_table`** (Таблица для связи "многие ко многим"):
   - Используется для реализации отношения "многие ко многим" между таблицами `trips` и `trip_segments`.
   - Поля:
     - `trip_segment_id`: внешний ключ на `trip_segments.id`.
     - `trip_id`: внешний ключ на `trips.id`.

3. **`Activity`** (Активности):
   - Таблица для хранения данных об активности.
   - Поля:
     - `id`: первичный ключ (автоинкрементируемый).
     - `name`: имя активности (например, поход, экскурсия).
   - Отношения:
     - `locations`: связь "многие ко многим" с таблицей `Location` через `activities_locations_table`.

4. **`Country`** (Страны):
   - Таблица для хранения данных о странах.
   - Поля:
     - `id`: первичный ключ (автоинкрементируемый).
     - `name`: имя страны.
   - Связи: 
     - Не указаны напрямую, но другие таблицы могут ссылаться на страны.

5. **`Location`** (Местоположения):
   - Таблица для хранения данных о местоположениях.
   - Поля:
     - `id`: первичный ключ (автоинкрементируемый).
     - `name`: имя местоположения (например, город или место).
     - `country_id`: внешний ключ на таблицу `countries`.
   - Отношения:
     - `activities`: связь "многие ко многим" с таблицей `Activity` через `activities_locations_table`.
     - `country`: отношение "многие к одному" с таблицей `Country`.

6. **`TransportType`** (Типы транспорта):
   - Таблица для хранения различных видов транспорта.
   - Поля:
     - `id`: первичный ключ (автоинкрементируемый).
     - `name`: имя типа транспорта (например, поезд, самолет).

7. **`TripSegment`** (Сегменты поездок):
   - Таблица для хранения сегментов (участков) поездок.
   - Поля:
     - `id`: первичный ключ (автоинкрементируемый).
     - `type_transport_id`: внешний ключ на таблицу `transport_types`.
     - `created_at`: время создания сегмента поездки.
     - `start_at`: дата и время начала сегмента поездки.
     - `finish_at`: дата и время окончания сегмента поездки.
     - `prise`: стоимость сегмента поездки.
     - `start_location_id`: внешний ключ на таблицу `locations` (место начала поездки).
     - `target_location_id`: внешний ключ на таблицу `locations` (место назначения поездки).
   - Отношения:
     - `type_transport`: отношение "многие к одному" с таблицей `TransportType`.
     - `start_location`: отношение "многие к одному" с таблицей `Location` (начальное местоположение).
     - `target_location`: отношение "многие к одному" с таблицей `Location` (конечное местоположение).
     - `trips`: связь "многие ко многим" с таблицей `Trip` через `trips_segments_table`.

8. **`Trip`** (Поездки):
   - Таблица для хранения данных о поездках.
   - Поля:
     - `id`: первичный ключ (автоинкрементируемый).
     - `created_at`: время создания поездки.
     - `start_at`: дата и время начала поездки.
     - `finish_at`: дата и время окончания поездки.
     - `start_location_id`: внешний ключ на таблицу `locations` (место начала поездки).
     - `target_location_id`: внешний ключ на таблицу `locations` (место назначения поездки).
     - `activity_id`: внешний ключ на таблицу `activities` (связанная активность).
   - Отношения:
     - `segments`: связь "многие ко многим" с таблицей `TripSegment` через `trips_segments_table`.
     - `start_location`: отношение "многие к одному" с таблицей `Location` (начальное местоположение).
     - `target_location`: отношение "многие к одному" с таблицей `Location` (конечное местоположение).
     - `activity`: отношение "многие к одному" с таблицей `Activity`.

### Связи между таблицами

- **`Trip` ↔ `TripSegment`**: "Многие ко многим" через таблицу `trips_segments_table`. Один `Trip` может состоять из множества сегментов (`TripSegment`), и один сегмент может входить в несколько поездок.
  
- **`Activity` ↔ `Location`**: "Многие ко многим" через таблицу `activities_locations_table`. Один `Activity` может проходить в нескольких местах, и одно место может быть связано с множеством активностей.

- **`Trip` ↔ `Location`**: "Многие к одному" через столбцы `start_location_id` и `target_location_id`. Каждая поездка начинается и заканчивается в определённых местах.

- **`TripSegment` ↔ `Location`**: "Многие к одному" через столбцы `start_location_id` и `target_location_id`. Каждый сегмент поездки начинается и заканчивается в определённых местах.

- **`Trip` ↔ `Activity`**: "Многие к одному". Каждая поездка может быть связана с определённой активностью.
